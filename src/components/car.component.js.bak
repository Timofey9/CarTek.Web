import React, { useEffect, useState } from 'react';
import withRouter from "./withRouter";
import { useLocation, useMatch, useParams } from 'react-router-dom'
import ApiService from "../services/cartekApiService";
import DataTable from 'react-data-table-component';

function CarComponent() {
    let { cancelled } = false;
    const [car, setCar] = useState({});

    let { plate } = useParams();

    console.log(plate);

    const acceptCar = () => {
        //var request = {
        //    driverId: driver.id,
        //    driverPass: driverPassword,
        //    questionaryId: uniqueId
        //};

        //console.log(request);

        //ApiService.acceptQuestionary(request)
        //    .then(({ data }) => {
        //        console.log(data);
        //    })
        //    .catch((error) => {
        //        console.log(error);
        //    });
    };

    useEffect(() => {
        ApiService.getCarByPlate(plate)
            .then(({ data }) => {
                console.log(data);
                setCar(data);
            })
            .catch((error) => {

            });

        return () => cancelled = true;
    }, []);

    const columns = [
        {
            name: "#",
            selector: (row, index) => index + 1,
            sortable: false,
            maxWidth: '1em'
        },
        {
            name: "Наименование",
            selector: (row, index) => <div className="d-flex justify-content-center">{row.name}</div>,
            sortable: false,
            center: true,
            wrap: true
        },
        {
            name: <div className="d-flex justify-content-center">Размер штрафа в случае утери или порчи комплектующих за 1 ед. в руб</div>,
            selector: (row, index) => row.price,
            sortable: false,
            center: true,
        }
    ];

    const customStyles = {
        headCells: {
            style: {
                fontSize: '14px',
                fontWeight: 'bold',
            },
        },
        cells: {
            style: {
                fontSize: '14px'
            },
        }
    };

    return (
        <div>
            <div>
                <h2>{car.brand} {car.model} (гос.номер: {car.plate})</h2>
            </div>
        </div>);
}

export default CarComponent;